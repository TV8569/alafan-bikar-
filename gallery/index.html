<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GALLERY | ALAFAN BIKAR</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

        :root {
            --bg-deep: #050508;
            --win-bg: rgba(12, 12, 18, 0.98);
            --neon-color: #00f2ff;
            --text-white: #ffffff;
            --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
            --ease-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .theme-red { --neon-color: #ff2d55; }

        * { box-sizing: border-box; outline: none; }

        body {
            background-color: var(--bg-deep);
            color: var(--text-white);
            font-family: 'Orbitron', 'Vazirmatn', sans-serif;
            margin: 0; padding: 0;
            height: 100vh; width: 100vw;
            overflow: hidden;
            background: radial-gradient(circle at 50% 50%, #151525 0%, #050508 100%);
            user-select: none;
            transition: background 0.8s var(--ease-out-expo);
        }

        .top-bar {
            height: 55px; padding: 0 25px;
            display: flex; align-items: center; justify-content: space-between;
            background: rgba(0, 0, 0, 0.85); border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px); z-index: 10001;
        }

        .search-container {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 5px 18px;
            display: flex; align-items: center;
            width: 220px; transition: all 0.4s var(--ease-out-expo);
        }
        .search-container:focus-within { border-color: var(--neon-color); width: 280px; }
        .search-container input { background: transparent; border: none; color: white; padding-left: 10px; width: 100%; font-size: 0.75rem; }

        #desktop-area { position: relative; width: 100%; height: calc(100vh - 55px); padding: 20px; }

        .desktop-icon {
            position: absolute; display: flex; flex-direction: column; align-items: center;
            cursor: grab; width: 85px; padding: 8px; border-radius: 10px;
            transition: transform 0.3s var(--ease-elastic), opacity 0.4s var(--ease-out-expo), background 0.3s;
            z-index: 10;
        }
        .desktop-icon.hidden { opacity: 0; pointer-events: none; transform: scale(0.5); }
        .desktop-icon:hover { background: rgba(255, 255, 255, 0.08); transform: scale(1.1); }
        .desktop-icon i { font-size: 2.4rem; color: #f3d03e; margin-bottom: 6px; pointer-events: none; }
        .desktop-icon span { font-size: 0.65rem; font-weight: 600; text-align: center; pointer-events: none; }

        /* پنجره */
        .window {
            position: fixed; width: 720px; height: 500px;
            background: var(--win-bg); border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 12px; box-shadow: 0 40px 80px rgba(0,0,0,0.8);
            display: flex; flex-direction: column; z-index: 1000;
            animation: winOpen 0.4s var(--ease-elastic);
            backdrop-filter: blur(15px); overflow: hidden;
        }
        @keyframes winOpen { from { opacity: 0; transform: scale(0.8) translateY(30px); } }

        .window.maximized {
            width: 100vw !important; height: calc(100vh - 55px) !important;
            top: 55px !important; left: 0 !important; border-radius: 0;
            transition: all 0.3s var(--ease-out-expo);
        }

        .title-bar {
            height: 40px; background: rgba(255,255,255,0.03);
            display: flex; justify-content: space-between; align-items: stretch;
            cursor: move; border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .win-title-container { flex: 1; display: flex; align-items: center; padding-left: 15px; pointer-events: none; }
        .win-controls { display: flex; align-items: stretch; }
        .win-btn { width: 46px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; cursor: pointer; transition: 0.2s; color: #888; }
        .win-btn:hover { background: rgba(255, 255, 255, 0.1); color: white; }
        .win-btn.close-btn:hover { background: #e81123 !important; color: white; }

        .address-bar { padding: 8px 18px; font-size: 0.7rem; color: #555; background: rgba(0,0,0,0.2); }

        /* گالری داخل فولدر */
        .win-content { flex: 1; overflow-y: auto; padding: 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 15px; align-content: start; }
        .win-content::-webkit-scrollbar { width: 5px; }
        .win-content::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        .file-item {
            display: flex; flex-direction: column; align-items: center; gap: 8px;
            padding: 10px; border-radius: 8px; transition: 0.2s; cursor: pointer;
        }
        .file-item:hover { background: rgba(255,255,255,0.05); }
        .file-item img { width: 70px; height: 70px; object-fit: cover; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1); }
        .file-item span { font-size: 0.6rem; color: #ccc; text-align: center; word-break: break-all; }

        .custom-menu {
            position: fixed; display: none; background: rgba(15, 15, 18, 0.98);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 6px 0;
            z-index: 20000; min-width: 170px; backdrop-filter: blur(10px); animation: menuFade 0.2s var(--ease-out-expo);
        }
        @keyframes menuFade { from { opacity: 0; transform: translateY(-5px); } }
        .menu-item { padding: 9px 15px; font-size: 0.75rem; cursor: pointer; color: #bbb; display: flex; align-items: center; gap: 10px; }
        .menu-item:hover { background: var(--neon-color); color: black; font-weight: bold; }
    </style>
</head>
<body onclick="hideMenus()" oncontextmenu="showDesktopMenu(event)">

    <div class="top-bar">
        <h1 style="font-size: 0.8rem; letter-spacing: 4px; color: var(--neon-color);">GALLERY</h1>
        <div class="search-container">
            <i class="fa-solid fa-magnifying-glass" style="opacity: 0.4; font-size: 0.7rem;"></i>
            <input type="text" id="searchInput" placeholder="Search..." oninput="handleSearch(this.value)">
        </div>
        <div id="clock" style="color: var(--neon-color); font-size: 0.9rem; font-weight: bold;">00:00:00</div>
    </div>

    <div id="desktop-area"></div>

    <div id="desktop-menu" class="custom-menu">
        <div class="menu-item" onclick="toggleTheme()"><i class="fa-solid fa-wand-magic-sparkles"></i> Switch Theme</div>
        <div class="menu-item" onclick="location.reload()"><i class="fa-solid fa-rotate"></i> Refresh</div>
    </div>

    <div id="folder-menu" class="custom-menu">
        <div class="menu-item" id="openAction"><i class="fa-solid fa-folder-open"></i> Open Folder</div>
    </div>

    <script>
        const folderNames = ["002", "Abbas", "Ali1021", "Dada", "FameAx", "Miner", "MRWl", "Okhtapoo3", "Seyed", "Vakal"];
        
        // دیتابیس عکس‌های فولدر 002
        const folderData = {
            "002": [
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002.png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(2).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(3).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(4).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(5).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(6).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(7).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(8).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(9).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(10).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(11).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(12).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(13).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(14).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(15).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(16).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(17).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(18).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(19).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(20).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(21).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(22).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(23).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(24).png",
                "https://s27.uupload.ir/files/amirabbas8585/Alafan%20Bikar/gallery/002/002%20(25).png"
            ]
        };

        const desktop = document.getElementById('desktop-area');
        let zIndexCounter = 1000;

        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString('en-GB');
        }, 1000);

        function renderIcons(filter = "") {
            desktop.innerHTML = '';
            const iconW = 95, iconH = 110, pad = 25;
            const cols = Math.floor((window.innerWidth - pad) / iconW);

            folderNames.forEach((name, i) => {
                const isMatch = name.toLowerCase().includes(filter.toLowerCase());
                const div = document.createElement('div');
                div.className = `desktop-icon ${isMatch ? '' : 'hidden'}`;
                div.style.left = (pad + (i % cols * iconW)) + 'px';
                div.style.top = (pad + (Math.floor(i / cols) * iconH)) + 'px';
                div.innerHTML = `<i class="fa-solid fa-folder"></i><span>${name}</span>`;
                div.ondblclick = () => openFolder(name);
                div.oncontextmenu = (e) => showFolderMenu(e, name);
                makeDraggable(div, false);
                desktop.appendChild(div);
            });
        }

        function openFolder(name) {
            const win = document.createElement('div');
            win.className = 'window';
            win.style.left = '15%'; win.style.top = '15%';
            win.style.zIndex = ++zIndexCounter;
            
            let contentHtml = '';
            if (folderData[name]) {
                folderData[name].forEach(url => {
                    const fileName = decodeURIComponent(url.split('/').pop().replace('.png', ''));
                    contentHtml += `
                        <div class="file-item" onclick="window.open('${url}', '_blank')">
                            <img src="${url}" loading="lazy">
                            <span>${fileName}</span>
                        </div>
                    `;
                });
            } else {
                contentHtml = `<div style="grid-column: 1/-1; text-align:center; opacity:0.1; margin-top:100px;">
                                <i class="fa-solid fa-images" style="font-size:4rem;"></i><p>EMPTY</p>
                               </div>`;
            }

            win.innerHTML = `
                <div class="title-bar">
                    <div class="win-title-container">
                        <i class="fa-solid fa-folder" style="color:#f3d03e; margin-right:8px; font-size:0.8rem;"></i>
                        <span style="font-size:0.75rem; font-weight:bold;">${name}</span>
                    </div>
                    <div class="win-controls">
                        <div class="win-btn"><i class="fa-solid fa-minus"></i></div>
                        <div class="win-btn" onclick="toggleMax(this)"><i class="fa-solid fa-expand"></i></div>
                        <div class="win-btn close-btn" onclick="this.parentElement.parentElement.parentElement.remove()"><i class="fa-solid fa-xmark"></i></div>
                    </div>
                </div>
                <div class="address-bar">This PC > Gallery > ${name}</div>
                <div class="win-content">${contentHtml}</div>
            `;
            document.body.appendChild(win);
            makeDraggable(win, true);
            win.onmousedown = () => win.style.zIndex = ++zIndexCounter;
        }

        function toggleMax(btn) {
            const win = btn.closest('.window');
            win.classList.toggle('maximized');
            btn.innerHTML = win.classList.contains('maximized') ? '<i class="fa-solid fa-compress"></i>' : '<i class="fa-solid fa-expand"></i>';
        }

        function makeDraggable(el, isWin) {
            let p1 = 0, p2 = 0, p3 = 0, p4 = 0;
            const handle = isWin ? el.querySelector('.title-bar') : el;
            handle.onmousedown = (e) => {
                if(e.target.closest('.win-btn') || el.classList.contains('maximized')) return;
                p3 = e.clientX; p4 = e.clientY;
                el.style.zIndex = ++zIndexCounter;
                document.onmouseup = () => { document.onmouseup = null; document.onmousemove = null; };
                document.onmousemove = (e) => {
                    p1 = p3 - e.clientX; p2 = p4 - e.clientY;
                    p3 = e.clientX; p4 = e.clientY;
                    let nT = el.offsetTop - p2; let nL = el.offsetLeft - p1;
                    const maxT = window.innerHeight - el.offsetHeight;
                    const maxL = window.innerWidth - el.offsetWidth;
                    el.style.top = Math.max(isWin ? 55 : 0, Math.min(nT, maxT)) + "px";
                    el.style.left = Math.max(0, Math.min(nL, maxL)) + "px";
                };
            };
        }

        function handleSearch(val) { renderIcons(val); }
        function showDesktopMenu(e) { e.preventDefault(); hideMenus(); const m = document.getElementById('desktop-menu'); m.style.display = 'block'; m.style.left = e.pageX + 'px'; m.style.top = e.pageY + 'px'; }
        function showFolderMenu(e, name) { e.preventDefault(); e.stopPropagation(); hideMenus(); const m = document.getElementById('folder-menu'); document.getElementById('openAction').onclick = () => openFolder(name); m.style.display = 'block'; m.style.left = e.pageX + 'px'; m.style.top = e.pageY + 'px'; }
        function hideMenus() { document.querySelectorAll('.custom-menu').forEach(m => m.style.display = 'none'); }
        function toggleTheme() { document.body.classList.toggle('theme-red'); }

        renderIcons();
        window.onresize = renderIcons;
    </script>
</body>
</html>
